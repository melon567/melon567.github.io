<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>rag学习记录</title>
    <link href="/2025/11/09/RAG%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/11/09/RAG%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p><img src="https://tttpora.oss-cn-guangzhou.aliyuncs.com/image-20251101000206999.png" alt="image-20251101000206999"></p><h1 id="导包"><a href="#导包" class="headerlink" title="导包"></a>导包</h1><div class="code-wrapper"><pre><code class="hljs python">! pip install langchain openai chromadb tiktoken langchain-openai langchain-community! pip install langchain-text-splitters! pip install pypdf! pip install dashscope! pip install langchain-classic</code></pre></div><h1 id="加载pdf文档为ducoment"><a href="#加载pdf文档为ducoment" class="headerlink" title="加载pdf文档为ducoment"></a>加载pdf文档为ducoment</h1><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_text_splitters <span class="hljs-keyword">import</span> RecursiveCharacterTextSplitter<span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> PyPDFLoader<span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span>  Chroma<span class="hljs-comment"># 加载pdf</span>loader = PyPDFLoader(<span class="hljs-string">&quot;/Users/jhx/Library/Mobile Documents/com~apple~CloudDocs/code/lawnote1.pdf&quot;</span>)data = loader.load() <span class="hljs-comment">#data是一个list,里面每一个元素都是document对象,每个元素就是1页的内容</span></code></pre></div><p>加载pdf为data列表，里面元素都是一个document，按页来分的，有22页，就有22个document</p><h1 id="对document进行切割为chunk"><a href="#对document进行切割为chunk" class="headerlink" title="对document进行切割为chunk"></a>对document进行切割为chunk</h1><div class="code-wrapper"><pre><code class="hljs python">text_splitter = RecursiveCharacterTextSplitter(chunk_size=<span class="hljs-number">500</span>, chunk_overlap=<span class="hljs-number">0</span>) splits = text_splitter.split_documents(data[:]) <span class="hljs-built_in">len</span>(splits)</code></pre></div><p>取data列表中的document元素进行切割，得到切割文本块</p><h1 id="使用embedding将chunk转换为vectordb"><a href="#使用embedding将chunk转换为vectordb" class="headerlink" title="使用embedding将chunk转换为vectordb"></a>使用embedding将chunk转换为vectordb</h1><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<span class="hljs-keyword">from</span> getpass <span class="hljs-keyword">import</span> getpass<span class="hljs-keyword">from</span> langchain_community.embeddings <span class="hljs-keyword">import</span> DashScopeEmbeddings<span class="hljs-comment"># 使用嵌入模型embedding</span>embedding = DashScopeEmbeddings(    model=<span class="hljs-string">&quot;text-embedding-v3&quot;</span>,  <span class="hljs-comment">#</span>    dashscope_api_key=<span class="hljs-string">&quot;sk-1ce9c48a8b834d29a7f19e5de787275f&quot;</span>,)<span class="hljs-comment">#得到向量数据库</span>vectordb = Chroma.from_documents(documents=splits, embedding=embedding)</code></pre></div><h1 id="将query和vectdb进行相似度对比，得到相关文档docs"><a href="#将query和vectdb进行相似度对比，得到相关文档docs" class="headerlink" title="将query和vectdb进行相似度对比，得到相关文档docs"></a>将query和vectdb进行相似度对比，得到相关文档docs</h1><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_classic.retrievers <span class="hljs-keyword">import</span> MultiQueryRetriever<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI<span class="hljs-comment">#得到llm</span>llm = ChatOpenAI(    openai_api_base=<span class="hljs-string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span>,    model=<span class="hljs-string">&quot;qwen-max&quot;</span>,      openai_api_key=<span class="hljs-string">&quot;sk-1ce9c48a8b834d29a7f19e5de787275f&quot;</span>,    temperature=<span class="hljs-number">0</span>)retriever_from_llm = MultiQueryRetriever.from_llm(    retriever=vectordb.as_retriever(),     llm=llm)question = <span class="hljs-string">&quot;抢劫罪的后果有哪些？&quot;</span><span class="hljs-comment"># 从向量数据库中invoke回docs</span>docs = retriever_from_llm.invoke(<span class="hljs-built_in">input</span>=question)<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;检索到 <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(docs)&#125;</span> 个相关文档&quot;</span>)<span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(docs):    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;文档 <span class="hljs-subst">&#123;i+<span class="hljs-number">1</span>&#125;</span>: \n<span class="hljs-subst">&#123;doc.page_content[:<span class="hljs-number">100</span>]&#125;</span>...&quot;</span>)    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span>*<span class="hljs-number">20</span>)</code></pre></div><h1 id="构建template，-llm根据得到的docs和query，重新生成回答text"><a href="#构建template，-llm根据得到的docs和query，重新生成回答text" class="headerlink" title="构建template， llm根据得到的docs和query，重新生成回答text"></a>构建template， llm根据得到的docs和query，重新生成回答text</h1><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate<span class="hljs-keyword">from</span> langchain_classic.chains <span class="hljs-keyword">import</span> LLMChain<span class="hljs-comment"># 创建模版，contexts：docs， query：quesiton</span>template = <span class="hljs-string">&quot;&quot;&quot;基于以下提供的内容回答问题，如果内容中不包含问题的答案，请回答“我不知道”</span><span class="hljs-string">内容：</span><span class="hljs-string">&#123;contexts&#125; </span><span class="hljs-string">-------------------------------------</span><span class="hljs-string">问题：</span><span class="hljs-string"> &#123;query&#125;</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># 创建生成prompt</span>mulitquery_PROMPT = PromptTemplate(input_variables=[<span class="hljs-string">&quot;query&quot;</span>, <span class="hljs-string">&quot;contexts&quot;</span>],                                    template=template,                                   )<span class="hljs-comment"># Chain</span>qa_chain = LLMChain(llm=llm, prompt=mulitquery_PROMPT)out = qa_chain( inputs=&#123;<span class="hljs-string">&quot;query&quot;</span>: question,                           <span class="hljs-string">&quot;contexts&quot;</span>: <span class="hljs-string">&quot;\n---\n&quot;</span>.join([d.page_content <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> docs]) &#125;                         )out</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>学习记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>kkk</title>
    <link href="/2025/11/07/kkk/"/>
    <url>/2025/11/07/kkk/</url>
    
    <content type="html"><![CDATA[<p>  我发现事情分为两种，<br>  一种是你知道自己应该去做，但是当下自己现在不愿意做的事情。<br>  另一种是自己当下很感兴趣的事情。</p><p>  这两种事情都应该去做，但是时间上是需要统筹规划的。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>mac zsh指令教程</title>
    <link href="/2025/11/05/zsh%E6%8C%87%E4%BB%A4%E6%95%99%E7%A8%8B/"/>
    <url>/2025/11/05/zsh%E6%8C%87%E4%BB%A4%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#切换文件目录</span><span class="hljs-built_in">cd</span> ~<span class="hljs-built_in">cd</span> aa<span class="hljs-built_in">cd</span> ./aa<span class="hljs-built_in">cd</span> ../aa</code></pre></div><h1 id="文件-目录的创建和删除"><a href="#文件-目录的创建和删除" class="headerlink" title="文件&#x2F;目录的创建和删除"></a>文件&#x2F;目录的创建和删除</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> file.txt <span class="hljs-comment">#创建文件</span><span class="hljs-built_in">mkdir</span> <span class="hljs-built_in">dir</span> <span class="hljs-comment">#创建目录</span><span class="hljs-built_in">mkdir</span> -p <span class="hljs-built_in">dir</span>/sub_dir<span class="hljs-comment"># 创建多级目录</span><span class="hljs-built_in">rm</span> file.txt<span class="hljs-comment"># 删除文件</span><span class="hljs-built_in">rmdir</span> <span class="hljs-built_in">dir</span><span class="hljs-comment"># 删除空目录</span><span class="hljs-built_in">rm</span> -r <span class="hljs-built_in">dir</span><span class="hljs-comment"># 逐级删除目录</span></code></pre></div><h1 id="目录的显示"><a href="#目录的显示" class="headerlink" title="目录的显示"></a>目录的显示</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#显示当前文件夹下所有内容</span><span class="hljs-built_in">ls</span> -l <span class="hljs-comment"># 以长格式显示文件信息</span><span class="hljs-built_in">ls</span> -a<span class="hljs-comment"># 列出所有文件（包括隐藏文件）</span><span class="hljs-built_in">ls</span> -h<span class="hljs-comment"># 以已读格式显示文件信息</span></code></pre></div><h1 id="目录的复制和移动"><a href="#目录的复制和移动" class="headerlink" title="目录的复制和移动"></a>目录的复制和移动</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> file.txt /path/to/destination <span class="hljs-comment"># 复制文件到指定路径的目录下</span><span class="hljs-built_in">cp</span> -r dir1 dir2<span class="hljs-comment"># 移动文件夹</span><span class="hljs-built_in">mv</span> file.txt /path/to/destination <span class="hljs-comment"># 修改文件夹的名字</span><span class="hljs-built_in">mv</span> oldname newname</code></pre></div><h1 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> file.txt <span class="hljs-comment"># 显示文件内容</span>less file.txt <span class="hljs-comment"># 分页查看文件内容</span></code></pre></div><h1 id="显示历史指令"><a href="#显示历史指令" class="headerlink" title="显示历史指令"></a>显示历史指令</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">history</span></code></pre></div><h1 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#设置环境变量（只在当前会话窗口有效）</span><span class="hljs-built_in">export</span> MY_VAR=<span class="hljs-string">&quot;kkk&quot;</span></code></pre></div><h1 id="显示环境变量的值"><a href="#显示环境变量的值" class="headerlink" title="显示环境变量的值"></a>显示环境变量的值</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$MY_VAR</span></code></pre></div><h1 id="显示当前目录的路径"><a href="#显示当前目录的路径" class="headerlink" title="显示当前目录的路径"></a>显示当前目录的路径</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">pwd</span></code></pre></div><h1 id="解压文件夹"><a href="#解压文件夹" class="headerlink" title="解压文件夹"></a>解压文件夹</h1><p>主要是tar指令的用法</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 解压 test.tar.gz到当前文件夹下面（压缩包保留在当前文件夹下面）</span>tar -zxvf test.tar.gz</code></pre></div><h1 id="网络远程下载"><a href="#网络远程下载" class="headerlink" title="网络远程下载"></a>网络远程下载</h1>]]></content>
    
    
    
    <tags>
      
      <tag>随笔</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建hexo fluid主题记录</title>
    <link href="/2025/11/04/%E6%90%AD%E5%BB%BAhexo%20fluid%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/11/04/%E6%90%AD%E5%BB%BAhexo%20fluid%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="具体流程"><a href="#具体流程" class="headerlink" title="具体流程"></a>具体流程</h1><p>1.下载npm，Node.js</p><p>2.创建一个hexo项目</p><div class="code-wrapper"><pre><code class="hljs bash">hexo init myblog<span class="hljs-built_in">cd</span> myblog<span class="hljs-comment"># 安装相关依赖</span>npm installhexo s</code></pre></div><p>3.安装最新的主题</p><div class="code-wrapper"><pre><code class="hljs bash">npm install --save hexo-theme-fluid</code></pre></div><p>4.然后在博客目录下创建 <code>_config.fluid.yml</code>，将主题的 <a href="https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml">_config.yml (opens new window)</a>内容复制过去。</p><p>5.如下修改 Hexo 博客目录中的 <code>_config.yml</code>：</p><div class="code-wrapper"><pre><code class="hljs yaml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span>  <span class="hljs-comment"># 指定主题</span><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span>  <span class="hljs-comment"># 指定语言，会影响主题显示的语言，按需修改</span></code></pre></div><h1 id="创建「关于页」"><a href="#创建「关于页」" class="headerlink" title="创建「关于页」"></a>创建「关于页」</h1><p>首次使用主题的「关于页」需要手动创建：</p><div class="code-wrapper"><pre><code class="hljs bash">hexo new page about</code></pre></div><p>创建成功后修改 <code>/source/about/index.md</code>，添加 <code>layout</code> 属性。</p><p>修改后的文件示例如下：</p><div class="code-wrapper"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><span class="hljs-attr">title:</span> <span class="hljs-string">标题</span><span class="hljs-attr">layout:</span> <span class="hljs-string">about</span><span class="hljs-meta">---</span><span class="hljs-meta"></span><span class="hljs-string">这里写关于页的正文，支持</span> <span class="hljs-string">Markdown,</span> <span class="hljs-string">HTML</span></code></pre></div><p>WARNING</p><p><code>layout: about</code> 必须存在，并且不能修改成其他值，否则不会显示头像等样式。</p><h1 id="关于如何推送"><a href="#关于如何推送" class="headerlink" title="关于如何推送"></a>关于如何推送</h1><h2 id="配置-config-yml-文件"><a href="#配置-config-yml-文件" class="headerlink" title="配置 _config.yml 文件"></a>配置 <code>_config.yml</code> 文件</h2><div class="code-wrapper"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><span class="hljs-symbol">  type:</span> git<span class="hljs-symbol">  repo:</span> https:<span class="hljs-comment">//github.com/melon567/melon567.github.io.git</span><span class="hljs-symbol">  branch:</span> main</code></pre></div><h2 id="安装部署插件"><a href="#安装部署插件" class="headerlink" title="安装部署插件"></a>安装部署插件</h2><div class="code-wrapper"><pre><code class="hljs ada">npm install hexo-deployer-git <span class="hljs-comment">--save</span></code></pre></div><h3 id="部署生成的文件"><a href="#部署生成的文件" class="headerlink" title="部署生成的文件"></a>部署生成的文件</h3><div class="code-wrapper"><pre><code class="hljs verilog">hexo clean &amp;&amp; hexo <span class="hljs-keyword">generate</span> &amp;&amp; hexo deploy</code></pre></div><h1 id="本地测试项目"><a href="#本地测试项目" class="headerlink" title="本地测试项目"></a>本地测试项目</h1><div class="code-wrapper"><pre><code class="hljs bash">hexo cleanhexo ghexo s</code></pre></div><h1 id="仅更新博客内容"><a href="#仅更新博客内容" class="headerlink" title="仅更新博客内容"></a>仅更新博客内容</h1><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 一键清理、生成并部署</span>hexo clean &amp;&amp; hexo g -d<span class="hljs-comment"># 或者分步执行</span>hexo clean    <span class="hljs-comment"># 清理缓存</span>hexo generate <span class="hljs-comment"># 生成静态文件</span>hexo deploy   <span class="hljs-comment"># 部署到GitHub</span></code></pre></div><h1 id="相关资源："><a href="#相关资源：" class="headerlink" title="相关资源："></a>相关资源：</h1><p>1.<a href="https://hexo.fluid-dev.com/docs/start/">Fluid官方指南</a></p><p>2.Hexo官方教程</p>]]></content>
    
    
    
    <tags>
      
      <tag>随笔</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo使用教程</title>
    <link href="/2025/11/04/hello-world/"/>
    <url>/2025/11/04/hello-world/</url>
    
    <content type="html"><![CDATA[<h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><h2 id="创建新的笔记"><a href="#创建新的笔记" class="headerlink" title="创建新的笔记"></a>创建新的笔记</h2><div class="code-wrapper"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span></code></pre></div><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h2 id="运行服务"><a href="#运行服务" class="headerlink" title="运行服务"></a>运行服务</h2><div class="code-wrapper"><pre><code class="hljs bash">$ hexo server</code></pre></div><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h2 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h2><div class="code-wrapper"><pre><code class="hljs bash">$ hexo generate</code></pre></div><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h2 id="远端部署"><a href="#远端部署" class="headerlink" title="远端部署"></a>远端部署</h2><div class="code-wrapper"><pre><code class="hljs bash">$ hexo deploy</code></pre></div><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
